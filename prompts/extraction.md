# 地点提取 Prompt 模板

> 用于从文学作品/历史文献中提取可巡礼的真实地理位置

## 核心 Prompt

```
角色： 你是一个专业的数据提取引擎，专攻从文学作品中提取可供"巡礼"的真实地理信息。你必须一丝不苟，严格遵循所有规则。

任务： 仔细阅读以下文本片段，识别并提取所有在现实世界中存在的、且具有明确指向性（适合巡礼）的地理位置。

核心定义：

title (string): 地点的通用、核心名称 (例如: "鬼崽岭", "大世界商城")。

address (string): 完整的、结构化的真实世界地址，必须符合 "省级-市级-县级-具体地点" 格式。

story (string): 严格基于原文，与该地点直接相关的核心事件摘要。必须是中文，且不多于120字。

关键规则：

精确性原则：

只提取具有具体兴趣点（如村庄、山脉、遗址、特定建筑）的地点。

区分： 必须提取"专有名称"（如"大世界商城"、"鬼崽岭"），而忽略"通用类别名称"（如"一个纺织大楼"、"一个车棚子"、"古玩市场"），除非该通用名称在现实中是可核查的唯一地标。

如果文本只提到模糊的大范围（如 "湖南" 或 "北京"），则必须忽略。

核查优先与上下文补充原则： 这是最重要的规则。

授权： 当文本中提到一个潜在的具体地点（如"鬼崽岭"、"大世界商城"），你必须：

利用上下文：查找文本中提到的上级地点（如"佳木斯"）。

核实：使用你的内部知识库，结合上下文，核实它是否为真实世界的地点。

补充：补充其完整的"省级-市级-县级-具体地点"信息，即使原文没有提供省/市/县等层级。

禁止： 你的"补充"仅限于为文中已有的地点构建 address 路径。严禁提取文本中未提及的地点。

过滤： 如果一个地点（如"纺织大楼"）因名称过分通用而无法在现实中精确定位和核实，则必须忽略。

综合性原则： 对于此文本片段中的每一个唯一地址，你必须且只能生成一条 JSON 记录。如果一个地点被反复提及，你必须将所有相关事件综合概括为一条 story。

格式化原则： 最终输出必须且只能是一个严格的 JSON 数组。

空集原则： 若文本中没有任何符合上述所有条件的地点，必须输出一个空数组 []。

思考步骤 (Chain-of-Thought)：

在生成最终 JSON 之前，你必须先在内部执行以下思考过程（不要在输出中显示）：

扫描与关联 (Scan & Associate)： 通读文本，标记所有潜在的专有地理名词（如"鬼崽岭"、"大世界商城"）。关键： 同时提取其上下文中的上级地点（如原文提到"佳木斯"是"大世界商城"的上下文）。

核查与过滤 (Verify & Filter)：

执行规则2： 逐个分析标记的地点。利用步骤1的上下文（如"佳木斯"）来核实其真实性。

示例A（通过）： 文本提及"佳木斯"和"大世界商城"。（内部核查："佳木斯 大世界商城"是否存在？是。-> 补充完整地址）。

示例B（丢弃）： 文本提及"纺织大楼"。（内部核查："纺织大楼"是否为可验证的唯一地标？否，过于通用。-> 丢弃）。

示例C（丢弃）： 文本提及"摸金校尉村"。（内部核查：是否真实？否，虚构。-> 丢弃）。

补充 (Enrich)： 为所有通过核查的地点，补充其完整的 "省级-市级-县级-具体地点" 结构。

分组： 将所有通过筛选的地点和事件，按照其唯一的 address 进行分组。

综合： 遍历每一个地址分组。将该地址关联的一个或多个事件，综合概括成一条 ≤120 字的核心 story。

构建： 将所有处理完毕的、唯一的地址条目整合成最终的 JSON 数组。

输入文本：

<<<TEXT BEGIN>>>

{在此粘贴章节分片全文}

<<<TEXT END>>>

期望输出 (严格的 JSON 数组)：

[
  {
    "title": "大世界商城",
    "address": "黑龙江省-佳木斯市-前进区-大世界商城",
    "story": "主角在此地与神秘人物会面，获得了关键线索..."
  }
]
```

## 使用说明

1. **替换占位符**: 将 `{在此粘贴章节分片全文}` 替换为实际的文本内容
2. **调整作品名**: 根据实际作品修改 prompt 中的作品名称
3. **批量处理**: 配合 `gen_llm_prompts.py` 脚本批量生成 prompts

## 输出格式示例

```json
[
  {
    "title": "鬼崽岭",
    "address": "湖南省-永州市-道县-鬼崽岭",
    "story": "项云峰一行人深夜探访鬼崽岭，发现了神秘的石像群，据说是古代祭祀遗址。"
  },
  {
    "title": "瓦泽",
    "address": "四川省-甘孜藏族自治州-康定市-瓦泽乡",
    "story": "众人从康定乘拖拉机抵达瓦泽，入住当地民宿，恰逢晒佛节前后。"
  }
]
```

## 注意事项

- **虚构地点**: 小说中的虚构地名（如"摸金校尉村"）必须被过滤
- **通用名称**: 避免提取过于通用的地点（如"古玩市场"、"饭店"）
- **上下文补充**: 利用 LLM 的知识库补充完整地址，但不能凭空添加文本未提及的地点
